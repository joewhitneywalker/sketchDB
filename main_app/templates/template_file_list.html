{% extends 'base.html' %}

{% block title %}
ALL FILES
{% endblock %}

{% block content %}
<form>
    <div>
        <!-- searches for the file name -->
        <input type="text" name="name" placeholder="name"/>
        <input type="submit" value="Search"/>
    </div>
    <!-- this a tag will redirect back to catlist without a query param! be sure to use the "name" you called the route in your main_app/urls.py -->
    <a href="{% url 'template_file_list' %}">Clear Search</a>
</form>

<table class="table mb-0">
    <thead>
        <tr>
            <th>PREVIEW</th>
            <th>FILE NAME</th>
            <th>CATEGORY</th>
            <th>SEASON</th>
            <th>CREATED BY</th>
            <th>DOWNLOAD</th>
            <th>DELETE</th>
        </tr>
    </thead>
    <tboday>
        {% for file in files %}
        <tr>
            <td>{% if file.preview %}
                    <img src="{{ file.preview.url }}" alt="{{ file.file_name }}" style="width:100px;">
                {% else %} 
                    <span class="text-muted">NO PREVIEW</span>   
                {% endif %}
            </td>
            <td>{{file.file_name}}</td>
            <td>{{file.category}}</td>
            <td>{{file.season}}</td>
            <td>{{file.created_by}}</td>
            <td>
                <a href="{{file.pdf.url}}" class="btn btn-primary btn-sm" target="_blank"> DOWNLOAD
                </a>
            </td>
            <td>
                <form method="post" action="{% url 'delete_file' file.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary btn-sm">DELETE</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

